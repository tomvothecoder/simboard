# -------------------------------------------------------------------
# SimBoard Backend Configuration
# Copy this file to `.env` and adjust values as needed.
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# General Application Configuration
# -------------------------------------------------------------------
# "development" | "production"
ENV=development
# Duplicate for frameworks expecting ENVIRONMENT
ENVIRONMENT=${ENV}
# FastAPI server port
PORT=8000
# Domain used by Traefik and backend CORS settings
DOMAIN=localhost
# Stack name for Traefik routing (should match docker-compose.yml)
STACK_NAME=simboard

# -------------------------------------------------------------------
# Frontend Configuration
# -------------------------------------------------------------------
# Origin for CORS requests
FRONTEND_ORIGIN=http://localhost:5173
# Optional: in production, set this to your deployed frontend
# FRONTEND_ORIGIN=https://app.${DOMAIN}

# -------------------------------------------------------------------
# Database Configuration
# -------------------------------------------------------------------
# Postgres credentials (used by both backend and db service)
POSTGRES_USER=simboard
POSTGRES_PASSWORD=simboard
POSTGRES_DB=simboard
POSTGRES_PORT=5432
PGDATA=/var/lib/postgresql/data/pgdata

# TODO: Comment/uncomment based on development setup
# 1. Docker Compose connection (Postgres service = "db")
POSTGRES_SERVER=db
DATABASE_URL=postgresql+psycopg://simboard:simboard@db:5432/simboard
TEST_DATABASE_URL=postgresql+psycopg://simboard:simboard@db:5432/simboard_test

# 2. Bare-metal local development connection ("localhost")
# POSTGRES_SERVER=localhost
# DATABASE_URL=postgresql+psycopg://simboard:simboard@localhost:5432/simboard
# TEST_DATABASE_URL=postgresql+psycopg://simboard:simboard@localhost:5432/simboard_test

# -------------------------------------------------------------------
# GitHub OAuth Configuration
# -------------------------------------------------------------------
# These come from your GitHub OAuth App (GitHub → Settings → Developer settings → OAuth Apps)
GITHUB_CLIENT_ID=your_github_oauth_app_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_app_client_secret

# Must match the callback URL in your GitHub App configuration
# In development, this points to your backend running on localhost
GITHUB_REDIRECT_URL=http://localhost:8000/auth/github/callback
# In production, use the frontend domain (e.g. https://app.${DOMAIN}/auth/callback)
# GITHUB_REDIRECT_URL=https://app.${DOMAIN}/auth/callback

# Secret used to sign OAuth "state" parameter (prevents CSRF)
# Generate securely with:
#   python -c "import secrets; print(secrets.token_urlsafe(64))"
GITHUB_STATE_SECRET_KEY=superlongrandomsecretforoauthstate

# -------------------------------------------------------------------
# Cookie Configuration (for session storage)
# -------------------------------------------------------------------
COOKIE_NAME=simboard_auth
# True in production (HTTPS)
COOKIE_SECURE=true
# Prevent JavaScript access
COOKIE_HTTPONLY=true
# "none" if cross-site, "strict" or "lax" otherwise
COOKIE_SAMESITE=lax
# Seconds
COOKIE_MAX_AGE=3600
